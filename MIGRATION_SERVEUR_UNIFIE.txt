â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                      â•‘
â•‘           ğŸ“¦ MIGRATION VERS LE SERVEUR UNIFIÃ‰                        â•‘
â•‘                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


ğŸ¯ POURQUOI ?
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Avant : 2 serveurs sÃ©parÃ©s
  â”œâ”€ Frontend  (port 5173 en dev, 3000 en prod)
  â””â”€ Backend   (port 3001)

ProblÃ¨me : Sur Infomaniak, impossible d'avoir 2 serveurs Node.js

Solution : 1 seul serveur unifiÃ©
  â”œâ”€ Frontend statique (dist/)
  â”œâ”€ API RSVP (/api/rsvp, /api/admin/*)
  â””â”€ API Contact (/api/contact)
  Tout sur le port 3000 !


âœ… CE QUI A Ã‰TÃ‰ FAIT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ… CrÃ©ation de server-unified.js
   Combine :
   â€¢ Le serveur frontend (ancien server.js)
   â€¢ L'API RSVP (ancien backend/server.js)
   â€¢ L'API Contact
   â€¢ Tout sur UN SEUL port

âœ… Guide de dÃ©ploiement
   â†’ DEPLOIEMENT_INFOMANIAK.md

âœ… Script de test
   â†’ test-unified.bat


ğŸ“‹ Ã‰TAPES DE MIGRATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

1. TESTER LOCALEMENT
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Option A - Automatique :
   Double-cliquez sur : test-unified.bat

   Option B - Manuelle :
   a) Build du frontend :
      npm run build

   b) DÃ©marrer le serveur unifiÃ© :
      node server-unified.js

   c) Tester :
      â€¢ Site : http://localhost:3000
      â€¢ Admin : http://localhost:3000/admin
      â€¢ API : http://localhost:3000/api/health


2. METTRE Ã€ JOUR .ENV
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Changez l'URL de l'API :
   
   AVANT :
   VITE_API_URL=http://localhost:3001

   MAINTENANT :
   VITE_API_URL=http://localhost:3000


3. REMPLACER LE SERVEUR
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Option A - Renommer :
   mv server.js server-old.js
   mv server-unified.js server.js

   Option B - Remplacer directement :
   copy server-unified.js server.js


4. REBUILD ET TESTER
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   npm run build
   node server.js

   Testez tout :
   â€¢ Formulaire RSVP
   â€¢ Dashboard admin
   â€¢ Export CSV


5. DÃ‰PLOYER SUR INFOMANIAK
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   Suivez le guide :
   â†’ DEPLOIEMENT_INFOMANIAK.md


ğŸ”„ DÃ‰VELOPPEMENT APRÃˆS MIGRATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

En dÃ©veloppement, vous avez 2 options :

OPTION 1 - Mode Dev Normal (recommandÃ© pour dÃ©velopper)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

Terminal 1 - Frontend Vite (modifications en temps rÃ©el) :
npm run dev
â†’ http://localhost:5173

Terminal 2 - Backend API :
cd backend
npm start
â†’ http://localhost:3001

.env :
VITE_API_URL=http://localhost:3001


OPTION 2 - Mode Production Local (pour tester avant dÃ©ploiement)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

npm run build
node server.js
â†’ http://localhost:3000 (tout en un)

.env :
VITE_API_URL=http://localhost:3000


ğŸ“Š COMPARAISON
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     AVANT (2 serveurs)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DÃ©veloppement :                                               â”‚
â”‚    Frontend  â†’ localhost:5173 (Vite)                           â”‚
â”‚    Backend   â†’ localhost:3001 (Node)                           â”‚
â”‚                                                                 â”‚
â”‚  Production :                                                  â”‚
â”‚    âŒ Impossible sur Infomaniak !                              â”‚
â”‚    Besoin de 2 serveurs sÃ©parÃ©s                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   MAINTENANT (1 serveur)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  DÃ©veloppement (option 1) :                                    â”‚
â”‚    Frontend  â†’ localhost:5173 (Vite - hot reload)             â”‚
â”‚    Backend   â†’ localhost:3001 (Node)                           â”‚
â”‚                                                                 â”‚
â”‚  DÃ©veloppement (option 2) :                                    â”‚
â”‚    Tout      â†’ localhost:3000 (Node - comme en prod)          â”‚
â”‚                                                                 â”‚
â”‚  Production :                                                  â”‚
â”‚    âœ… Tout   â†’ localhost:3000 (Node)                           â”‚
â”‚    Compatible Infomaniak !                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


âš ï¸  FICHIERS Ã€ NE PLUS UTILISER
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Une fois le serveur unifiÃ© testÃ© et validÃ© :

âŒ backend/server.js       â†’ RemplacÃ© par server-unified.js
âŒ start-dev.bat           â†’ Utilise encore 2 serveurs
âŒ server-old.js           â†’ Sauvegarde de l'ancien

Vous pouvez les garder en backup ou les supprimer.


âœ… FICHIERS IMPORTANTS MAINTENANT
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

âœ“ server.js                  â†’ Serveur unifiÃ© (ex: server-unified.js)
âœ“ package.json               â†’ Scripts de build/start
âœ“ .env                       â†’ VITE_API_URL=http://localhost:3000
âœ“ dist/                      â†’ Frontend compilÃ©
âœ“ data/                      â†’ DonnÃ©es RSVP
  â”œâ”€ responses.json
  â””â”€ admin.json


ğŸ¯ CHECKLIST DE MIGRATION
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

EN LOCAL :
  [ ] Tester server-unified.js
  [ ] Mettre Ã  jour .env (VITE_API_URL=http://localhost:3000)
  [ ] Rebuild : npm run build
  [ ] Remplacer server.js par server-unified.js
  [ ] Tester avec node server.js
  [ ] VÃ©rifier formulaire RSVP fonctionne
  [ ] VÃ©rifier dashboard admin fonctionne
  [ ] Tester export CSV

SUR INFOMANIAK :
  [ ] Changer mot de passe admin dans .env
  [ ] Envoyer server.js + dist/ + package.json
  [ ] npm install --production
  [ ] Configurer les variables d'environnement
  [ ] pm2 start server.js --name wedding
  [ ] Tester le site en production
  [ ] Configurer sauvegardes automatiques


ğŸ“ AIDE
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Si problÃ¨me, consultez :
  â†’ DEPLOIEMENT_INFOMANIAK.md (guide complet)
  â†’ Les logs du serveur
  â†’ /api/health pour tester l'API


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                      â•‘
â•‘   âœ… LE SERVEUR UNIFIÃ‰ EST PRÃŠT POUR INFOMANIAK ! âœ…                 â•‘
â•‘                                                                      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

